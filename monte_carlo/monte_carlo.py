import random  # Импортируем модуль для генерации случайных чисел

# Функция, реализующая метод Монте-Карло для поиска самой длинной последовательности
def monte_carlo_sequence(trials):
    
    # Вложенная функция, которая генерирует одну последовательность согласно условиям задачи
    def generate_sequence():
        sequence = []  # Пустая последовательность, куда будем добавлять числа
        used_intervals = set()  # Множество для отслеживания уже занятых частей интервала
        for n in range(1, 1000):  # Ограничим количество шагов 1000, чтобы не зацикливаться
            # Разделим интервал (0, 1) на n частей. Размер каждой части будет 1/n
            interval_size = 1 / n
            
            # Генерируем случайное число в интервале (0, 1)
            x_n = random.uniform(0, 1)
            
            # Найдем, в какой "части" интервала находится сгенерированное число
            # Для этого делим число на размер части и берем целую часть (индекс интервала)
            interval_index = int(x_n // interval_size)
            
            # Проверяем, занималась ли уже эта часть интервала предыдущими числами
            if interval_index in used_intervals:
                # Если да, то последовательность прерывается, выходим из цикла
                break
            
            # Если часть не занята, добавляем индекс этой части в множество занятых
            used_intervals.add(interval_index)
            
            # Добавляем число в последовательность
            sequence.append(x_n)
        
        # Возвращаем сгенерированную последовательность
        return sequence
    
    # Переменная для хранения самой длинной последовательности
    longest_sequence = []
    
    # Повторяем процесс многократно (trials раз)
    for _ in range(trials):
        # Генерируем одну последовательность
        sequence = generate_sequence()
        
        # Если длина новой последовательности больше, чем текущая самая длинная,
        # то обновляем переменную longest_sequence
        if len(sequence) > len(longest_sequence):
            longest_sequence = sequence
    
    # Возвращаем самую длинную последовательность, найденную за все попытки
    return longest_sequence

# Запустим Монте-Карло с 10,000 попытками (можно изменить количество попыток)
longest_sequence = monte_carlo_sequence(10000)

# Выведем результат: самую длинную последовательность и её длину
print("Самая длинная последовательность:", longest_sequence)
print("Длина последовательности:", len(longest_sequence))
